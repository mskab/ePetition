# ePetition

The project's goal is to simplify the way of creating and posting electronic petitions and signing them.

## Development Requirements
- Python3 installed on PC
- VS Code IDE (preferred for debugging purposes) or any other IDE to code Python
- PostgreSQL, PgAdmin
- Postman or Chrome/Firefox to access OpenAPI Specs automatically generated by FastAPI Framework

## Install project and all dependencies
### Python

- Install any python3 version from https://www.python.org/downloads/

Create a new project directory(folder) and `cd` into it. To create and active a virtual environment run the following command from terminal:

For Windows based OS Users
```
python -m venv env
#env is the name of virtual env
.\env\Scripts\activate
```

Linux based OS Users:
```
python3 -m venv env
#env is the name of virtual env
source ./env/bin/activate
```

When you create a new project in PyCharm, virtual environment will be created automatically.

Clone Git repository and open repo folder
```
git clone <clone address>
cd <name of cloned repository>
```

Install FastAPI and other packages for API
```
pip install pipenv
pipenv install
```

## Connect PostgresSQL

- Run PostgresSQL Server on your PC (you can download Postgres here https://www.postgresql.org/download/)

For managing DB you can use pgAdmin(https://www.pgadmin.org/download/)
- In pgAdmin or any other PostgresSQL GUI connect(or create and then) to your server and create DB
- Create an environment file and name it `.env` in root of the repository. 
- Inside the `.env` file, do the following:
```
POSTGRES_USER = postgres
POSTGRES_PASSWORD = yourpassword
POSTGRES_SERVER = localhost
POSTGRES_PORT = 5432
POSTGRES_DB = yourdbname_eg_debug
SSL_MODE = prefer
SECRET_KEY = yoursecretkey
REFRESH_SECRET_KEY = yourrefreshkey
```

## Migrations

Run the following code to enable migration:
```
alembic upgrade head
alembic revision --autogenerate -m "New Migration"
```

## Run Server

In repository `cd` to `api` directory 
```
cd api
```
run this line in terminal:
``` 
uvicorn main:app --reload
``` 